module resolution

language MiniC
start symbol Program

// variable names
test backward variable resolution [[
  int bar(int a){
    int [[c]];
    [[c]] = a;
    return 0;
  }
  
  0
]] resolve #2 to #1

test backward variable resolution [[
  int bar(float a){
    float [[c]];
    [[c]] = a;
    return 0;
  }
  
  0
]] resolve #2 to #1

test backward variable resolution [[
  struct Foo {int a;};
  
  int bar(int a){
    struct Foo [[c]];
    [[c]].a = a;
    return 0;
  }
  
  0
]] resolve #2 to #1


test [[
  struct Point {
    int a;
  };
  
  struct Point [[p]];
  
  int main() {
    int a;
    p.a = 0;
    return 0;
  }
  
  [[p]].a
]] resolve #2 to #1


test [[
  struct Point {
    int a;
  };
  
  struct Point [[p]];
  
  int main() {
    int a;
    [[p]].a = 0;
    return 0;
  }
  
  p.a
]] resolve #2 to #1


test hidden var [[
  int a;
  
  int main() {
    int [[a]];
    a = 2;
    return [[a]];
  }
  
  0
]] resolve #2 to #1

test backward variable resolution [[
  int [[a]];
  
  int bar(){
    [[a]] = 0;
    return 0;
  }
  
  0
]] resolve #2 to #1

test hidden var [[
  int [[a]];
  
  int main(){
    a = 2;
    return a;
  }
  
  [[a]]
]] resolve #2 to #1


test [[
  struct b{
    int b;
  };
  
  int main(){
    struct b [[b]];
    [[b]].b = 3;
    return b;
  }
  
  0
]] resolve #2 to #1


test [[
  struct b{
    int b;
  };
  
  int main(){
    struct b [[b]];
    b.b = 3;
    return [[b]];
  }
  
  0
]] resolve #2 to #1


test variable resolution [[
  struct a{
    int a;
  };
  
  int main() {
    int [[a]];
    [[a]] = 1;
    return 0;
  }
  
  0
]] resolve #2 to #1


test variable resolution [[
  struct a{
    int a;
  };
  
  int main() {
    struct a b;
    int [[a]];
    [[a]] = 1;
    return 0;
  }
  
  0
]] resolve #2 to #1
